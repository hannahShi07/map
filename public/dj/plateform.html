<!DOCTYPE html>
<html lang="en"  class="plate-bc red-style">
<head>
    <meta charset="UTF-8">
    <title>智慧大屏</title>
    <link rel="stylesheet" href="css/plateform.css">
    <script src="js/common.js" type="text/javascript"></script>
</head>
<body>
<div class="plateform-wrap plate-bc clearfix">
    <div class="plate-tit">
        <!-- <span class="txt">经济开发区智慧党建大数据服务平台</span> -->
		<span class="txt">经济开发区非公企业智慧党建大数据服务平台</span>
        <a href="index.html" class="rightlink" target="_blank">返回党建门户首页</a>
    </div>
    <!-- 左侧29% -->
    <div class="left-wrap fl">
        <!--党支部建制统计-->
     <!--   <div class="p-container">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">党支部建制统计</span>
                </div>
                <div class="con">
                    <ul>
                        <li class="data-wrap">
                            <div class="left-label" id="dwhNum" >%</div>
                            <div class="right-con">党委占比</div>
                        </li>
                        <li class="data-wrap">
                            <div class="left-label" id="dzbNum" >%</div>
                            <div class="right-con">党支部占比</div>
                        </li>
                        <li class="data-wrap">
                            <div class="left-label" id="dzzNum" >%</div>
                            <div class="right-con">党总支部占比</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div> -->

        <!--组织数-->
        <div class="p-container">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">党组织数</span>
                </div>
                <!-- <div class="con">
                    <div class="data-wrap2">
                        <div class="leftbox">
                            <div class="circle-wrap">
                                <i id="total_o_num">3000</i>
                            </div>
                            <p class="labeltxt">总组织数</p>
                        </div>
                        <div class="rightbox">
                            <ul>
                                <li class="data-cell">
                                    <label for="">A类：</label>
                                    <div class="data-bar"><span class="bar" id="o_a_num">1000</span></div>
                                    <span class="unit"><i>个</i></span>
                                </li>
                                <li class="data-cell">
                                    <label for="">B类：</label>
                                    <div class="data-bar"><span class="bar" id="o_b_num">1000</span></div>
                                    <span class="unit"><i>个</i></span>
                                </li>
                                <li class="data-cell">
                                    <label for="">C类：</label>
                                    <div class="data-bar"><span class="bar" id="o_c_num">1000</span></div>
                                    <span class="unit"><i>个</i></span>
                                </li>
                                                                    <li class="data-cell">
                                                                            <label for="">D类：</label>
                                                                            <div class="data-bar"><span class="bar" id="o_d_num">1000</span></div>
                                                                            <span class="unit"><i>个</i></span>
                                                                    </li>
                            </ul>
                        </div>
                    </div>
                </div> -->
                <div class="con">
                    <div class="chart-wrap">
                        <div id="chart6" style="width: 340px;height: 180px;margin: 0 auto;"></div>
                    </div>
                </div>

            </div>
        </div>

        <!--党员人数-->
        <div class="p-container">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">三会一课排名前五</span>
                </div>
                <div class="con">
                    <div class="data-wrap2 data-wrap3">
                        <!-- <div class="leftbox">
                             <div class="circle-wrap">
                                 <i id="total_num" >人</i>
                             </div>
                             <p class="labeltxt">总党员人数</p>
                         </div> -->
                        <div class="rightbox">
                            <ul>
                                <li class="data-cell">
                                    <label for=""><span class="txt">中共经济开发区工作委员会：</span></label>
                                    <div class="data-bar">
                                        <span class="bar" id="">17</span>
                                        <span class="bar-line" style="width: 31%;"></span>
                                    </div>
                                </li>
                                <li class="data-cell">
                                    <label for=""><span class="txt">中共安徽理士电源技术有限公司党总支：</span></label>
                                    <div class="data-bar"><span class="bar" id="">11</span>
                                        <span class="bar-line" style="width: 21%;"></span>
                                    </div>
                                </li>
                                <li class="data-cell">
                                    <label for=""><span class="txt">中共安徽新品源电池技术有限公司党支部：</span></label>
                                    <div class="data-bar"><span class="bar" id="">10</span>
                                        <span class="bar-line" style="width: 19%;"></span>
                                    </div>
                                </li>
                                <li class="data-cell">
                                    <label for=""><span class="txt">中共淮北天科机械电器有限公司党支部：</span></label>
                                    <div class="data-bar"><span class="bar"  id="">10</span>
                                        <span class="bar-line" style="width: 15%;"></span>
                                    </div>
                                </li>
                                <li class="data-cell">
                                    <label for=""><span class="txt">中共安徽理士电池技术有限公司行政设备党支部：</span></label>
                                    <div class="data-bar"><span class="bar"  id="">9</span>
                                        <span class="bar-line" style="width: 13%;"></span>
                                    </div>
                                </li>


                            </ul>
                        </div>
                    </div>
                </div>


            </div>
        </div>



    </div>

    <!-- 中间42% -->
    <div class="center-wrap fl">
        <!--党员职业分布占比-->
        <div class="chart-wrap">
            <div id="chart1" style="width: 684px;height:270px;margin: 0 auto;"></div>
        </div>

        <!--党员总数按年份变化图-->
        <div class="p-container p-container2" style="margin-top: 24px;">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">入党年份总数</span>
                </div>
                <div class="con">
                    <div class="chart-wrap">
                        <span class="top-unit">单位/人</span>
                        <div id="chart4" style="width: 100%;height: 210px;margin: 0 auto;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!--三会一课-->
        <div class="p-container p-container2 p-container3" style="margin-top:48px;">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">三会一课</span>
                </div>
                <div class="con">
                    <div class="chart-wrap">
                        <span class="top-unit">单位/次</span>
                        <span class="bottom-unit">月/2019年</span>
                        <div id="chart5" style="width: 100%;height: 220px;margin: 0 auto;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--右侧29%-->
    <div class="right-wrap fr">
        <!--党员男女人数-->
        <div class="p-container">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">党员男女人数</span>
                </div>
                <div class="con">
                    <div class="data-wrap2">
                        <div class="leftbox">
                            <div class="circle-wrap" >
                                <i  id ="totalnum" >人</i>
                            </div>
                            <p class="labeltxt">总党员人数</p>
                        </div>
                        <div class="rightbox" style="vertical-align: middle">
                            <ul>
                                <li class="data-cell">
                                    <label for="">男性：</label>
                                    <div class="data-bar"><span class="bar" id="man"> </span></div>
                                    <span class="unit"><i>人</i></span>
                                </li>
                                <li class="data-cell">
                                    <label for="">女性：</label>
                                    <div class="data-bar"><span class="bar" id="warman"> </span></div>
                                    <span class="unit"><i>人</i></span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--学历人数-->
        <div class="p-container">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">学历人数</span>
                </div>
                <div class="con">
                    <div class="chart-wrap">
                        <div id="chart2" style="width: 340px;height: 180px;margin: 0 auto;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!--党员类型-->
        <div class="p-container">
            <div class="innerblock">
                <div class="tit">
                    <span class="txt">党员类型</span>
                </div>
                <div class="con">
                    <div class="chart-wrap">
                        <div id="chart3" style="width: 340px;height: 182px;margin: 0 auto;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="js/jquery.js"></script>
<script src="js/echarts.js"></script>
<script>


    //$.ajaxSettings.async = false;
    var man = 0;
    var warman = 0;
    var totalnum = 0;
    var education = [];
    var educationNum = [];
    var job = [];
    var jobNum = [];
    var party = [];
    var partynNum = [];
    var dangyuan = [];
    var dangyuanNum =[];
    loadSiteList2();
    function loadSiteList2() {
        var token = "www.yifarj.com";
        var produre = "PKG_PHONE.EXESELECT";
        var operate = "PARTYMEMBER_INFO";
        var modelName = "IFrame.Client.ZiLaiShui.XPhonePartymemberInfo,IFrame.Client.ZiLaiShui";
        var filter = "";
        var orderBy = "";


        $.post("https://wx.yifarj.com/zax/yifa.asmx/PhoneFetchList",{

            'token' : token,
            'produre' : produre,
            'operate' : operate,
            'modelName' : modelName,
            'filter' : filter,
            'orderBy' : orderBy
        },function(data){
            // console.log(data);
            var relust= eval("("+data+")")
            var Value=relust.Value;
            // console.log(Value);
            for(var i=0;i<Value.length;i++){
                if(Value[i].SexName == "男"){
                    man += 1;
                }
                if(Value[i].SexName == "女"){
                    warman += 1;
                }
                totalnum = warman + man;
                if(!isEmptyNull(Value[i].DjEducationName)){

                    var a = education.indexOf(Value[i].DjEducationName);
                    var b = job.indexOf(Value[i].DjJobName)
                    if(a > -1){
                        educationNum[a] += 1;

                    }else{
                        var l = education.length;
                        education[l] = Value[i].DjEducationName;
                        educationNum[l] = 1;
                    }
                    if(b > -1){
                        jobNum[b] += 1;
                    }else{
                        var l = job.length;
                        job[l] = Value[i].DjJobName;
                        jobNum[l] = 1;
                    }

                }

                if(!isEmptyNull(Value[i].MemberName)){

                    var a = party.indexOf(Value[i].MemberName);

                    if(a > -1){
                        partynNum[a] += 1;

                    }else{
                        var l = party.length;
                        party[l] = Value[i].MemberName;
                        partynNum[l] = 1;
                    }
                }

                if(!isEmptyNull(Value[i].PartyTime)){

                    var a = dangyuan.indexOf(Value[i].PartyTime.substring(0,4));

                    if(a > -1){
                        dangyuanNum[a] += 1;

                    }else{
                        var l = dangyuan.length;
                        dangyuan[l] = Value[i].PartyTime.substring(0,4);
                        dangyuanNum[l] = 1;
                    }
                }

            }



            $("#man").html(man);
            $("#warman").html(warman);
            $("#totalnum").html(totalnum);

            var totle1 = 0;
            for(var i=0;i<educationNum.length;i++){
                totle1 += educationNum[i];


                var dataPieXl = {
                    dataName:education,
                    dataValue:educationNum,
                };

            }


            var educationData = [];
            for(var i=0;i<education.length;i++){
                var a = {
                    value:((educationNum[i]/totle1)*100).toFixed(2),
                    name:education[i]
                };
                educationData[i] = a;
                educationNum[i] = ((educationNum[i]/totle1)*100).toFixed(2);
            }
            var jobs=[];
            var jobNums=[];
            var ls=job.length;
            var ind=0;
            for(var i=ls-1;i>=0;i--){
                jobs[ind]=job[i];
                jobNums[ind]=jobNum[i];
                ind++;
            }

            var jobData = [];
            for(var i=0;i<jobs.length;i++){
                var b = {
                    value:jobNums[i],
                    name:jobs[i]
                }
                jobData[i] = b ;
            }



            var partyData = [];
            var totle = 0;
            for(var i=0;i<partynNum.length;i++){
                totle += partynNum[i];
            }


            for(var i=0;i<party.length;i++){
                var a = {
                    value:((partynNum[i]/totle)*100).toFixed(2),
                    name:party[i]
                };
                partyData[i] = a;
                partynNum[i] = ((partynNum[i]/totle)*100).toFixed(2);
            }

            var dataPieLx = {
                dataName:party,
                dataValue:partynNum,
            };
            //	console.log("ssssssssssssssssssssssssssss");
            var arr = new Array(dangyuan.length);
            for(var i=0;i<dangyuan.length;i++){
                arr[i] = dangyuan[i];
            }
            var sorts = arr.sort();
            var dangyuans = [];
            var dangyuanNums = [];
            for(var i=0;i<sorts.length;i++){
                var a = dangyuan.indexOf(sorts[i]);
                dangyuans[i] = dangyuan[a];
                dangyuanNums[i] = dangyuanNum[a];
            }

            init(dataPieXl,educationData,dataPieLx,partyData,dangyuans,dangyuanNums,jobData);

        });


    }
    var dzbNum=0;
    var dzzNum=0;
    var dwhNum=0;
    var totle = 1;

    var p_a_num=0;
    var p_b_num=0;
    var p_c_num=0;
    var p_d_num=0;

    var o_a_num =0;
    var o_b_num =0;
    var o_c_num =0;
    var o_d_num =0;



    var partyOrganDatas  = [];
    var total_num = 0;

    // $.ajaxSettings.async = false;
    loadPartyList();
    function loadPartyList() {
        $.post("https://wx.yifarj.com/zax/yifa.asmx/PhoneFetchList",{
            'token' : "www.yifarj.com",
            'produre' : "PKG_PHONE.EXESELECT",
            'operate' : "PHONE_PARTY_ORGANIZE_SUMMARY",
            'modelName' : "IFrame.Client.ZiLaiShui.XPhonePartyOrganizeSummary,IFrame.Client.ZiLaiShui",
            'filter' : "",
            'orderBy' : ""
            },function(data){
            // console.log(data);
            var relust= eval("("+data+")")
            var Value=relust.Value;
            // console.log(Value);
            var ccc = [];
            var cccName = [];

//             for(var i=0;i<Value.length;i++){
//                 var reg1 = RegExp(/党支部/);
//                 var reg2 = RegExp(/支部委员会/);
//                 var reg3 = RegExp(/党总支/);
//                 if(Value[i].Name.match(reg1) ){
//                     dzbNum += 1;
//                 }
//                 if(Value[i].Name.match(reg2) ){
//                     dwhNum += 1;
//                 }
//                 if(Value[i].Name.match(reg3) ){
//                     dzzNum += 1;
//                 }
//
//                 partyOrganDatas[i]= {
//                     id:Value[i].DjPartyOrganizeId,
//                     name:Value[i].Name
//                 };
//
//             }

            //查询该机构下数据量
            for(var i=0; i< partyOrganDatas.length;i++){
                //getShykNumByOrg(partyOrganDatas[i],i);
                        var token = "www.yifarj.com";
                        var produre = "PKG_WX.EXESELECT";
                        var operate = "PHONE_SYSTEM";
                        var modelName = "IFrame.Client.ZiLaiShui.XPhoneSystem,IFrame.Client.ZiLaiShui";
                        var filter = "T.SYSTEM_TYPE=3 AND T.DJ_SYSTEM_TYPE_ID=1010010 AND T.dj_party_organize_id="+partyOrganDatas[i].id;// AND T.dj_party_organize_id = 党组织id
                        var orderBy = "T.RELEASE_DATE DESC";
                        var pageIndex = 1;
                        var pageSize = 1000;

                        $.post("https://wx.yifarj.com/zax/yifa.asmx/PhoneFetchPageList",{
                            'token' : token,
                            'produre' : produre,
                            'operate' : operate,
                            'modelName' : modelName,
                            'filter' : filter,
                            'orderBy' : orderBy,
                            'pageIndex': pageIndex,
                            'pageSize': pageSize
                        },function(data){

                        var relust= eval("("+data+")")
                        var Value=relust.Value;

                        if(!isEmptyNull(Value)){

                            ccc[i] = Value.length;
                            cccName[i] = partyOrganDatas[i].name;

                        }

                })
            }
            // console.log("11111111111");
            // console.log(ccc);
            // console.log(cccName);
            var arr1 = new Array(ccc.length);
            for(var i=0;i<ccc.length;i++){
                arr1[i] = ccc[i];
            }
            var sorts1 = arr1.sort();
            var cccs = [];
            var cccNums = [];
            for(var i=0;i<sorts1.length;i++){
                var a = ccc.indexOf(sorts1[i]);
                cccs[i] = ccc[a];
                cccNums[i] = cccName[a];
            }
            // console.log("00000000");
            // console.log(cccs);
            // console.log(cccNums);

            total_num = Value[0].TotalPartymember;

            p_a_num=Value[1].TotalPartymember;
            p_b_num=Value[2].TotalPartymember;
            p_c_num=Value[3].TotalPartymember;
            p_d_num=Value[4].TotalPartymember;

            o_a_num =Value[5].SubNodes;
            o_b_num =Value[6].SubNodes;;
            o_c_num =Value[7].SubNodes;;
            o_d_num =Value[8].SubNodes;;
            total_o_num = Value[0].SubNodes;

            totle = dzbNum+dwhNum+dzzNum;
            $("#dwhNum").html( ((dwhNum/totle)*100).toFixed(2) +'%' );
            $("#dzbNum").html( ((dzbNum/totle)*100).toFixed(2) +'%' );
            $("#dzzNum").html( ((dzzNum/totle)*100).toFixed(2) +'%' );

            $("#p_a_num").html(p_a_num);
            $("#p_b_num").html(p_b_num);
            $("#p_c_num").html(p_c_num);
            $("#p_d_num").html(p_d_num);

            $("#total_num").html(total_num);

            $("#o_a_num").html(o_a_num);
            $("#o_b_num").html(o_b_num);
            $("#o_c_num").html(o_c_num);
            $("#o_d_num").html(o_d_num);

            $("#total_o_num").html(total_o_num);

            var dataPieLx = {
                dataName:party,
                dataValue:partynNum,
            };
            //console.log(partyData);
            //init(dataPieXl,educationData,dataPieLx,partyData);
        });
    }


    function getShykNumByOrg(data,index) {
                    var token = "www.yifarj.com";
                    var produre = "PKG_WX.EXESELECT";
                    var operate = "PHONE_SYSTEM";
                    var modelName = "IFrame.Client.ZiLaiShui.XPhoneSystem,IFrame.Client.ZiLaiShui";
                    var filter = "T.SYSTEM_TYPE=3 AND T.DJ_SYSTEM_TYPE_ID=1010010 AND T.dj_party_organize_id="+data.id;// AND T.dj_party_organize_id = 党组织id
                    var orderBy = "T.RELEASE_DATE DESC";
                    var pageIndex = 1;
                    var pageSize = 1000;

                    $.post("https://wx.yifarj.com/zax/yifa.asmx/PhoneFetchPageList",{
                        'token' : token,
                        'produre' : produre,
                        'operate' : operate,
                        'modelName' : modelName,
                        'filter' : filter,
                        'orderBy' : orderBy,
                        'pageIndex': pageIndex,
                        'pageSize': pageSize
                    },function(data){

                    var relust= eval("("+data+")")
                    var Value=relust.Value;

                    if(!isEmptyNull(Value)){
                        // console.log("9999999999999999999999");
                        ccc[index] = Value.length;
                        cccName[index] = data.name;

                    }

            })

    }
    // $.ajaxSettings.async = true;





    //获取组织发布三会一课数量
    // 先获取 党组织ID  list
    // 循环获取数据,计算数量
    var shykName =[];
    loadShykList();
    function loadShykList() {
        var token = "www.yifarj.com";
        var produre = "PKG_WX.EXESELECT";
        var operate = "PHONE_SYSTEM";
        var modelName = "IFrame.Client.ZiLaiShui.XPhoneSystem,IFrame.Client.ZiLaiShui";
        var filter = "T.SYSTEM_TYPE=3 AND T.DJ_SYSTEM_TYPE_ID=1010010 AND T.dj_party_organize_id ="+partyOrganDatas.id;// AND T.dj_party_organize_id = 党组织id
        var orderBy = "T.RELEASE_DATE DESC";
        var pageIndex = 1;
        var pageSize = 10;

        $.post("https://wx.yifarj.com/zax/yifa.asmx/PhoneFetchPageList",{
            'token' : token,
            'produre' : produre,
            'operate' : operate,
            'modelName' : modelName,
            'filter' : filter,
            'orderBy' : orderBy,
            'pageIndex': pageIndex,
            'pageSize': pageSize
        },function(data){

            var relust= eval("("+data+")")
            var Value=relust.Value;
            //console.log(Value.length)

        })
    }


    var meeting = [];
    var meetingNum = [];

    loadSiteListz();
    function loadSiteListz() {
        var token = "www.yifarj.com";
        var produre = "PKG_PHONE.EXESELECT";
        var operate = "SANHUIYIKE_SUMMARY";
        var modelName = "IFrame.Client.ZiLaiShui.XPhoneSanhuiyikeSummary,IFrame.Client.ZiLaiShui";
        var filter = "";
        var orderBy = "";


        $.post("https://wx.yifarj.com/zax/yifa.asmx/PhoneFetchList",{

            'token' : token,
            'produre' : produre,
            'operate' : operate,
            'modelName' : modelName,
            'filter' : filter,
            'orderBy' : orderBy
        },function(data){
            // console.log(data);
            var relust= eval("("+data+")")
            var Value=relust.Value;
            for(var i=0;i<Value.length;i++){
                meeting[i] = Value[i].Month;
                meetingNum[i]=Value[i].Quantiy;

            }
            init1(meeting,meetingNum);

        });


    }


    function isEmptyNull(name) {
        if(!name || name == undefined || name == null || name == "null"){
            return true;
        }else{
            return false;
        }
    }

    function init(dataPieXl,educationData,dataPieLx,partyData,dangyuan,dangyuanNum,jobData){

        var myChart1 = echarts.init(document.getElementById('chart1'));
        var myChart2 = echarts.init(document.getElementById('chart2'));
        var myChart3 = echarts.init(document.getElementById('chart3'));
        var myChart4 = echarts.init(document.getElementById('chart4'));

        var myChart6 = echarts.init(document.getElementById('chart6'));

        option16 = {
            title : {
                text: '',
                subtext: '',
                x:'center'
            },
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['A类','B类','C类','D类']
            },
            series : [
                {
                    name: '党组织数',
                    type: 'pie',
                    radius : '80%',
                    center: ['50%', '60%'],
                    data:[
                        {value:9, name:'A类'},
                        {value:12, name:'B类'},
                        {value:22, name:'C类'},
                        {value:10, name:'D类'}
                    ],
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

		        option6 = {
		            tooltip: {
		                trigger: 'item',
		                formatter: "{b}: {c} ({d}%)"
		            },
		            grid: {
		                "left": "50%",
		                "right": "1%",
		                "top": "1%",
		                height:"50%",
		                containLabel: true
		            },
		            legend: {
		                left: 'right',
		                top:'center',
		                bottom: '2%',
		                icon:'rect',
		                orient: 'vertical',
		                x: 'right',
		                itemWidth: 12,
		                itemHeight:12,
		                textStyle:{
		                    color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"],
		                    fontSize:14
		                },
		                data:['A类','B类','C类','D类'],
// 						,
// 		                formatter: function(name) {
// 		                    var index = 0;
// 		                    dataPieXl.dataName.forEach(function(value,i){
// 		                        if(value == name){
// 		                            index = i;
// 		                        }
// 		                    });
// 		                    return name + " " + dataPieXl.dataValue[index] + "%";
// 		                }
//
		            },
		            series: [
		                {
		                    name: '',
		                    type: 'pie',
		                    radius: '90%',
		                    center: ['40%', '50%'],
		                    calculable:true,
		                    clockwise: true,
		                    data: [
                                {value:9, name:'A类'},
                                {value:12, name:'B类'},
						{value:22, name:'C类'},

                        {value:10, name:'D类'}
                    ],

		                    label: {
		                        normal: {
		                            formatter: '{b}{c}%',
		                            position:'inner',
		                            textStyle: {
		                                color: '#fff',
		                                fontSize: 12,
		                            }
		                        }
		                    },
		                    labelLine: {
		                        normal: {
		                            show: false
		                        }
		                    },
		                    itemStyle: {
		                        normal: {
		                            borderWidth: 1,
		//                    borderColor: '#ffffff',
		                        },
		                        emphasis: {
		                            borderWidth: 0,
		                            shadowBlur: 10,
		                            shadowOffsetX: 0,
		//                    shadowColor: 'rgba(0, 0, 0, 0.5)'
		                        }
		                    }
		                },
		            ],
		            color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"]

		        };



        option1 = {
            color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"],
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },
            legend: {
                type: 'scroll',
                icon: 'rect',
                itemHeight:'20',
                itemGap:20,
                orient: 'vertical',
                x: '350',
                y:'20',
                data:jobData,
                textStyle:{
                    fontSize:'20',
                    color:'#fff',
                    textAlign:'left'
                }
            },
            series: [
                {
                    name:'党员职业',
                    type:'pie',
                    center: ['24%', '48%'],
                    radius: ['60%', '90%'],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            show: true,
                            textStyle: {
                                fontSize: '30',
                                fontWeight: 'bold'
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    data:jobData
                }
            ]
        };
        option2 = {
            tooltip: {
                trigger: 'item',
                formatter: "{b}: {c} ({d}%)"
            },
            grid: {
                "left": "50%",
                "right": "1%",
                "top": "1%",
                height:"50%",
                containLabel: true
            },
            legend: {
                left: 'right',
                top:'center',
                bottom: '2%',
                icon:'rect',
                orient: 'vertical',
                x: 'right',
                itemWidth: 12,
                itemHeight:12,
                textStyle:{
                    color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"],
                    fontSize:16
                },
                data:dataPieXl.dataName,
                formatter: function(name) {
                    var index = 0;
                    dataPieXl.dataName.forEach(function(value,i){
                        if(value == name){
                            index = i;
                        }
                    });
                    return name + " " + dataPieXl.dataValue[index] + "%";
                }

            },
            series: [
                {
                    name: '',
                    type: 'pie',
                    radius: '90%',
                    center: ['40%', '50%'],
                    calculable:true,
                    clockwise: true,
                    data: educationData,

                    label: {
                        normal: {
                            formatter: '{b}{c}%',
                            position:'inner',
                            textStyle: {
                                color: '#fff',
                                fontSize: 9,
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderWidth: 1,
//                    borderColor: '#ffffff',
                        },
                        emphasis: {
                            borderWidth: 0,
                            shadowBlur: 10,
                            shadowOffsetX: 0,
//                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                },

            ],
            color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"]

        };
        option3 = {
            tooltip: {
                trigger: 'item',
                formatter: "{b}: {c} ({d}%)"
            },
            grid: {
                "left": "50%",
                "right": "1%",
                "top": "1%",
                height:"50%",
                containLabel: true
            },
            legend: {
                left: 'right',
                top:'center',
                bottom: '2%',
                icon:'rect',
                orient: 'vertical',
                x: 'right',
                itemWidth: 12,
                itemHeight:12,
                textStyle:{
                    color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"],
                    fontSize:16
                },
                data:dataPieLx.dataName,
                formatter: function(name) {
                    var index = 0;
                    dataPieLx.dataName.forEach(function(value,i){
                        if(value == name){
                            index = i;
                        }
                    });
                    return name + " " + dataPieLx.dataValue[index] + "%";
                }

            },
            series: [
                {
                    name: '',
                    type: 'pie',
                    radius: '90%',
                    center: ['40%', '50%'],
                    calculable:true,
                    clockwise: true,
                    data: partyData,

                    label: {
                        normal: {
                            formatter: '{b}{c}%',
                            position:'inner',
                            textStyle: {
                                color: '#fff',
                                fontSize: 16,
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderWidth: 1,
//                    borderColor: '#ffffff',
                        },
                        emphasis: {
                            borderWidth: 0,
                            shadowBlur: 10,
                            shadowOffsetX: 0,
//                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                },

            ],
            color:["#b39ddb","#ffc102","#39d3dd","#ff7324","#36a4df"]

        };
        option4 = {
            color:["#6a9cd5"],
            tooltip: {
                trigger: 'axis',
                formatter: "{b}: {c}人"
            },
            grid: {
                top: '8%',
                left: '1%',
                right: '4%',
                bottom: '4%',
                containLabel: true,
            },
            xAxis: [{
                type: 'category',
                boundaryGap: false,
                axisLine: { //坐标轴轴线相关设置。数学上的x轴
                    show: true,
                    lineStyle: {
//                        color: '#233e64'
                        color: '#643a23'
                    },
                },
                axisLabel: { //坐标轴刻度标签的相关设置
                    textStyle: {
//                        color: '#6a9cd5',
                        color: '#d5906a',
                        margin:15,
                    },
                },
                axisTick: { show: false,},
                data: dangyuan,
            }],
            yAxis: [{
                type: 'value',
                min: 0,
                max:100,
                splitNumber: 7,
                splitLine: {
                    show: true,
                    lineStyle: {
//                        color: '#233e64'
                        color: '#643a23'
                    }
                },
                axisLine: {show: false,},
                axisLabel: {
                    margin:20,
                    textStyle: {
//                        color: '#6a9cd5',
                        color: '#d5906a',

                    },
                },
                axisTick: { show: false,},
            }],
            series: [{
                name: '党员总数',
                type: 'line',
                smooth: true, //是否平滑曲线显示
                symbolSize:0,
                lineStyle: {
                    normal: {
//                        color: "#3deaff"   // 线条颜色
                        color: "#ff7d75"   // 线条颜色
                    }
                },
                areaStyle: { //区域填充样式
                    normal: {
                        //线性渐变，前4个参数分别是x0,y0,x2,y2(范围0~1);相当于图形包围盒中的百分比。如果最后一个参数是‘true’，则该四个值是绝对像素位置。
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            /*{ offset: 0,  color: 'rgba(61,234,255, 0.9)'},
                            { offset: 0.9,  color: 'rgba(61,234,255, 0)'}*/
                            { offset: 0,  color: 'rgba(255,0,0, 0.9)'},
                            { offset: 0.9,  color: 'rgba(255,0,0, 0)'}

                        ], false),

                        shadowColor: 'rgba(215,118,53, 0.9)', //阴影颜色
                        shadowBlur: 20 //shadowBlur设图形阴影的模糊大小。配合shadowColor,shadowOffsetX/Y, 设置图形的阴影效果。
                    }
                },
                data: dangyuanNum
            }]
        };

        myChart1.setOption(option1);
        myChart2.setOption(option2);
        myChart3.setOption(option3);
        myChart4.setOption(option4);

        myChart6.setOption(option6);
    }

    function init1(meeting,meetingNum){
        var myChart5 = echarts.init(document.getElementById('chart5'));
        option5 = {
            color:["#6a9cd5"],
            tooltip: {
                trigger: 'axis',
                formatter: "{b}月: {c}次"
            },
            grid: {
                top: '12%',
                left: '1%',
                right: '4%',
                bottom: '4%',
                containLabel: true,
            },
            xAxis: [{
                type: 'category',
                boundaryGap: false,
                axisLine: { //坐标轴轴线相关设置。数学上的x轴
                    show: true,
                    lineStyle: {
//                        color: '#233e64'
                        color: '#643a23'
                    },
                },
                axisLabel: { //坐标轴刻度标签的相关设置
                    textStyle: {
//                        color: '#6a9cd5',
                        color: '#d5906a',
                        margin:15,
                    },
                },
                axisTick: { show: false,},
                data: meeting,
            }],
            yAxis: [{
                type: 'value',
                min: 0,
                max:100,
                splitNumber: 7,
                splitLine: {
                    show: true,
                    lineStyle: {
//                        color: '#233e64'
                        color: '#643a23'
                    }
                },
                axisLine: {show: false,},
                axisLabel: {
                    margin:20,
                    textStyle: {
//                        color: '#6a9cd5',
                        color: '#d5906a',

                    },
                },
                axisTick: { show: false,},
            }],
            series: [{
                name: '三会一课',
                type: 'line',
                smooth: true, //是否平滑曲线显示
                symbolSize:0,
                lineStyle: {
                    normal: {
                        color: "#ff7d75"   // 线条颜色
                    }
                },
                areaStyle: { //区域填充样式
                    normal: {
                        //线性渐变，前4个参数分别是x0,y0,x2,y2(范围0~1);相当于图形包围盒中的百分比。如果最后一个参数是‘true’，则该四个值是绝对像素位置。
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            { offset: 0,  color: 'rgba(255,0,0, 0.9)'},
                            { offset: 0.9,  color: 'rgba(255,0,0, 0)'}
                        ], false),

                        shadowColor: 'rgba(215,118,53, 0.9)', //阴影颜色
                        shadowBlur: 20 //shadowBlur设图形阴影的模糊大小。配合shadowColor,shadowOffsetX/Y, 设置图形的阴影效果。
                    }
                },
                data: meetingNum
            }]
        };
        myChart5.setOption(option5);
    }
    //监听div大小变化
    (function($, h, c) {
        var a = $([]),
            e = $.resize = $.extend($.resize, {}),
            i,
            k = "setTimeout",
            j = "resize",
            d = j + "-special-event",
            b = "delay",
            f = "throttleWindow";
        e[b] = 250;
        e[f] = true;
        $.event.special[j] = {
            setup: function() {
                if (!e[f] && this[k]) {
                    return false;
                }
                var l = $(this);
                a = a.add(l);
                $.data(this, d, {
                    w: l.width(),
                    h: l.height()
                });
                if (a.length === 1) {
                    g();
                }
            },
            teardown: function() {
                if (!e[f] && this[k]) {
                    return false;
                }
                var l = $(this);
                a = a.not(l);
                l.removeData(d);
                if (!a.length) {
                    clearTimeout(i);
                }
            },
            add: function(l) {
                if (!e[f] && this[k]) {
                    return false;
                }
                var n;
                function m(s, o, p) {
                    var q = $(this),
                        r = $.data(this, d);
                    r.w = o !== c ? o: q.width();
                    r.h = p !== c ? p: q.height();
                    n.apply(this, arguments);
                }
                if ($.isFunction(l)) {
                    n = l;
                    return m;
                } else {
                    n = l.handler;
                    l.handler = m;
                }
            }
        };
        function g() {
            i = h[k](function() {
                    a.each(function() {
                        var n = $(this),
                            m = n.width(),
                            l = n.height(),
                            o = $.data(this, d);
                        if (m !== o.w || l !== o.h) {
                            n.trigger(j, [o.w = m, o.h = l]);
                        }
                    });
                    g();
                },
                e[b]);
        }
    })(jQuery, this);
    $(".chart-wrap div").resize(function(){
        myChart4.resize();
        myChart5.resize();
    });



</script>
</body>
</html>
